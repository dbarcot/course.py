<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Tutoriál</title>
    <link rel="stylesheet" href="style.css">
    <!-- Link to a syntax highlighting library CSS (e.g., Highlight.js) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
</head>
<body>
    <div class="tutorial-container">
        <aside class="navigation-pane">
            <h2>Kapitoly</h2>
            <nav>
                <ul>
                    <li><a href="#" data-chapter="kapitola1_uvod.html">Kapitola 1: Úvod</a></li>
                    <li class="collapsible">
                        <span class="collapsible-toggle">Kapitola 2: Základní konstrukce</span>
                        <ul>
                            <li><a href="#" data-chapter="kapitola2_promenne.html">Proměnné a přiřazení</a></li>
                            <li><a href="#" data-chapter="kapitola2_vstup_vystup.html">Základní vstup/výstup</a></li>
                            <li><a href="#" data-chapter="kapitola2_komentare.html">Komentáře</a></li>
                            <li><a href="#" data-chapter="kapitola2_odsazeni.html">Odsazení</a></li>
                            <li><a href="#" data-chapter="kapitola2_podminky.html">Podmíněné příkazy</a></li>
                            <li><a href="#" data-chapter="kapitola2_cyklus_for.html">Cyklus for</a></li>
                            <li><a href="#" data-chapter="kapitola2_cyklus_while.html">Cyklus while</a></li>
                            <li><a href="#" data-chapter="kapitola2_prikaz_break.html">Příkaz break</a></li>
                            <li><a href="#" data-chapter="kapitola2_funkce.html">Definování funkcí</a></li>
                            <li><a href="#" data-chapter="kapitola2_osetreni_chyb.html">Ošetření chyb</a></li>
                            <li><a href="#" data-chapter="kapitola2_import.html">Importování modulů</a></li>
                        </ul>
                    </li>
                    <li class="collapsible">
                        <span class="collapsible-toggle">Kapitola 3: Další konstrukce</span>
                        <ul>
                            <li><a href="#" data-chapter="kapitola3_pokracovani_cyklu.html">Příkaz continue</a></li>
                            <li><a href="#" data-chapter="kapitola3_dalsi_osetreni_chyb.html">else a finally v try-except</a></li>
                            <li><a href="#" data-chapter="kapitola3_vice_radkove_komentare.html">Víceřádkové komentáře a Docstringy</a></li>
                            <li><a href="#" data-chapter="kapitola3_from_import.html">from ... import ...</a></li>
                        </ul>
                    </li>
                    <!-- Další kapitoly budou přidány zde -->
                </ul>
            </nav>
        </aside>
        <main class="content-pane">
            <!-- The chapter content will be loaded here dynamically -->
            <div id="chapter-content">
                <!-- Initial content or loading message -->
                <h1>Vítejte v Python Tutoriálu!</h1>
                <p>Tento interaktivní tutoriál vás provede základy programování v jazyce Python.</p>
                <p>Vyberte si kapitolu z navigačního menu vlevo a začněte se učit.</p>
                <p>Hodně štěstí!</p>
            </div>
        </main>
    </div>

    <!-- JavaScript for syntax highlighting (e.g., Highlight.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <!-- Optionally, load specific languages for Highlight.js if not using the common pack -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <!-- Your custom JavaScript file -->
    <script src="script.js"></script>
    <script>
        // Function to load chapter content
        async function loadChapterContent(chapterUrl, sectionId = null) {
            try {
                const response = await fetch(chapterUrl);
                if (!response.ok) {
                    throw new Error(`Could not load ${chapterUrl}: ${response.statusText}`);
                }
                const content = await response.text();
                document.getElementById('chapter-content').innerHTML = content;

                // Apply syntax highlighting to the newly loaded content
                document.querySelectorAll('#chapter-content pre code').forEach((block) => {
                    hljs.highlightBlock(block);
                });

                // Scroll to the specific section if sectionId is provided
                if (sectionId) {
                    const sectionElement = document.getElementById(sectionId);
                    if (sectionElement) {
                        sectionElement.scrollIntoView({ behavior: 'smooth' });
                    }
                } else {
                     // Scroll to the top of the content pane for new chapter loads
                    document.querySelector('.content-pane').scrollTop = 0;
                }

            } catch (error) {
                console.error("Error loading chapter content:", error);
                document.getElementById('chapter-content').innerHTML = "<p>Chyba při načítání obsahu kapitoly.</p>";
            }
        }

        // Add event listeners to navigation links and collapsible toggles
        document.addEventListener('DOMContentLoaded', () => {
            // Event listeners for navigation links (loading content)
            const navLinks = document.querySelectorAll('.navigation-pane a[data-chapter]');
            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); // Prevent default link behavior
                    const chapterUrl = link.getAttribute('data-chapter');
                    // Check if the link has a section ID (e.g., #section-id)
                    const urlParts = chapterUrl.split('#');
                    const baseUrl = urlParts[0];
                    const sectionId = urlParts[1] || null;

                    // If clicking a link within the *currently loaded* chapter, just scroll
                    const currentChapter = document.getElementById('chapter-content').dataset.currentChapter;
                    if (currentChapter === baseUrl && sectionId) {
                         const sectionElement = document.getElementById(sectionId);
                         if (sectionElement) {
                             sectionElement.scrollIntoView({ behavior: 'smooth' });
                         }
                    } else {
                        // Load new chapter content
                        document.getElementById('chapter-content').dataset.currentChapter = baseUrl; // Store current chapter URL
                        loadChapterContent(chapterUrl, sectionId);
                    }
                });
            });


            // Initial load of the first chapter content when the page loads
            loadChapterContent('kapitola1_uvod.html');
        });
    </script>
</body>
</html>
